enum PollStatus {
  SCHEDULED
  IN_PROGRESS
  COMPLETED
}

enum PollConfidence {
  LOW
  HIGH
}

model Poll {
  // Using UUID7 here gives us time-based ordering of IDs. This is important for
  // the cursor-based pagination model supported by the Polls API.
  id                      String          @id @default(uuid(7))
  name                    String
  status                  PollStatus
  messageContent          String          @map("message_content")
  imageUrl                String?         @map("image_url")
  targetAudienceSize      Int
  confidence              PollConfidence?
  scheduledDate           DateTime        @map("scheduled_date")
  estimatedCompletionDate DateTime
  completedDate           DateTime?       @map("completed_date")

  electedOffice           ElectedOffice?  @relation(fields: [electedOfficeId], references: [id], onDelete: Cascade)
  electedOfficeId         String?         @map("elected_office_id")

  createdAt               DateTime        @default(now()) @map("created_at")
  updatedAt               DateTime        @updatedAt @map("updated_at")

  @@index([electedOfficeId, id])
}
