enum TcrComplianceStatus {
  submitted
  pending
  approved
  rejected
  error
}

enum OfficeLevel {
  federal
  state
  local
}

// Committee types that map to Peerly's committee_type field.
// See: https://api-docs.peerly.com/reference/submit-campaign-verify-request
enum CommitteeType {
  H  // House (federal)
  S  // Senate (federal)
  P  // Presidential (federal)
  CA // Candidate (state/local)
}

model TcrCompliance {
  id                    String                     @id @default(cuid())
  ein                   String
  postalAddress         String
  committeeName         String                     @map("committee_name")
  websiteDomain         String                     @map("website_domain")
  filingUrl             String                     @map("filing_url")
  phone                 String
  email                 String
  officeLevel           OfficeLevel                @map("office_level")
  fecCommitteeId        String?                    @map("fec_committee_id")
  committeeType         CommitteeType?             @default(CA) @map("committee_type")
  status                TcrComplianceStatus?       @default(submitted)
  tdlcNumber            String?                    @map("tdlc_number")
  createdAt             DateTime                   @default(now()) @map("created_at")
  updatedAt             DateTime                   @updatedAt @map("updated_at")
  campaign              Campaign                   @relation(fields: [campaignId], references: [id], onDelete: Cascade)
  campaignId            Int                        @unique @map("campaign_id")

  peerlyIdentityId              String? @unique @map("peerly_identity_id")
  peerlyRegistrationLink        String? @map("peerly_registration_link")
  peerlyIdentityProfileLink     String? @map("peerly_identity_profile_link")
  peerly10DLCBrandSubmissionKey String? @unique @map("peerly_10dlc_brand_submission_key")

  @@map("tcr_compliance")
}
